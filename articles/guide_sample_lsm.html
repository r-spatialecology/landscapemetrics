<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sampling around points of interest • landscapemetrics</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sampling around points of interest">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">landscapemetrics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/get_started.html"><span class="fa fa-magic"></span> Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-gears"></span> Functions</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-more" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-graduation-cap"></span> More</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-more">
<li><a class="dropdown-item" href="../articles/general_background.html"><span class="fa fa-book"></span> General Background</a></li>
    <li><a class="dropdown-item" href="../articles/comparing_tools.html"><span class="fa fa-book"></span> Differences FRAGSTATS|landscapemetrics</a></li>
    <li><a class="dropdown-item" href="../articles/landscape_distribution_statistics.html"><span class="fa fa-book"></span> Landscape distribution statistics</a></li>
    <li><a class="dropdown-item" href="../articles/new_metrics.html"><span class="fa fa-book"></span> New Metrics outside FRAGSTATS</a></li>
    <li><a class="dropdown-item" href="../articles/guide_sample_lsm.html"><span class="fa fa-book"></span> Sample metrics</a></li>
    <li><a class="dropdown-item" href="../articles/guide_moving_window.html"><span class="fa fa-book"></span> Moving window</a></li>
    <li><a class="dropdown-item" href="../articles/irregular_areas.html"><span class="fa fa-book"></span> Calculating landscape metrics for irregular areas</a></li>
    <li><a class="dropdown-item" href="../articles/utility.html"><span class="fa fa-book"></span> Utility functions</a></li>
    <li><a class="dropdown-item" href="../articles/publication_record.html"><span class="fa fa-file-text-o"></span> Publication Record</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-spatialecology/landscapemetrics/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.maxhesselbarth.com/"><span class="fa fa-user"></span></a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Sampling around points of interest</h1>
            
            <h4 data-toc-skip class="date">2024-09-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/r-spatialecology/landscapemetrics/blob/main/vignettes/articles/guide_sample_lsm.Rmd" class="external-link"><code>vignettes/articles/guide_sample_lsm.Rmd</code></a></small>
      <div class="d-none name"><code>guide_sample_lsm.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatialecology.github.io/landscapemetrics/">landscapemetrics</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># internal data needs to be read</span></span>
<span><span class="va">landscape</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu">landscapemetrics</span><span class="fu">::</span><span class="va"><a href="../reference/landscape.html">landscape</a></span><span class="op">)</span></span></code></pre></div>
<p><strong>landscapemetrics</strong> provides several functions to
sample metrics <em>at</em> or <em>around</em> sample points. On possible
application for this feature could be a study in which the study
organism only encounters the landscape within a local neighborhood of
sample points. For most functions, sample points can be provided as a
2-column matrix(x- and y-coordinate), or <a href="https://cran.r-project.org/web/packages/sf/index.html" class="external-link"><strong>sf</strong></a>
objects (Pebesma 2018) are supported.</p>
<p>First, we create some example sample locations.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create some example points</span></span>
<span><span class="op">(</span><span class="va">points</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">5</span>, <span class="fl">25</span>, <span class="fl">15</span>, <span class="fl">5</span>, <span class="fl">25</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">##      [,1] [,2]</span></span>
<span><span class="co">## [1,]   10    5</span></span>
<span><span class="co">## [2,]   25   15</span></span>
<span><span class="co">## [3,]    5   25</span></span>
<span></span>
<span><span class="co"># # create some example lines</span></span>
<span><span class="co"># x1 &lt;- c(1, 5, 15, 10)</span></span>
<span><span class="co"># y1 &lt;- c(1, 5, 15, 25)</span></span>
<span><span class="co"># x2 &lt;- c(10, 25)</span></span>
<span><span class="co"># y2 &lt;- c(5, 5)</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># sample_lines &lt;- sf::st_multilinestring(x = list(cbind(x1, y1), cbind(x2, y2)))</span></span></code></pre></div>
<div class="section level2">
<h2 id="extract-landscape-metrics-at-sample-points">Extract landscape metrics at sample points<a class="anchor" aria-label="anchor" href="#extract-landscape-metrics-at-sample-points"></a>
</h2>
<p><code><a href="../reference/extract_lsm.html">extract_lsm()</a></code> returns the metrics of all patches in
which a sample point is located. However, since this only makes sense
for individual patches, it’s only possible to extract patch-level
metrics.</p>
<p><img src="guide_sample_lsm_files/figure-html/unnamed-chunk-2-1.png" width="700" style="display: block; margin: auto;"></p>
<p>Now, it’s straightforward to extract e.g. the patch area of all
patches in which a sample point is located. Similar to all functions
calculating several landscape metrics, the selected metrics can be
specified by various arguments (see <code><a href="../reference/list_lsm.html">list_lsm()</a></code> for more
details). The resulting tibble includes one extra column (compared to
<code><a href="../reference/calculate_lsm.html">calculate_lsm()</a></code>), indicating the ID of the sample
points.</p>
<p>Because three sample points were provided and only the patch area was
requested, the resulting tibble also has three rows - one for each
sample point. The first and the second sample point are actually located
in the same patch and following also the area is identical. The third
sample point is located in a much smaller patch. The <em>tibble</em>
gives also information about the patch ids and the land-cover classes in
which sample points are located.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/extract_lsm.html">extract_lsm</a></span><span class="op">(</span><span class="va">landscape</span>, y <span class="op">=</span> <span class="va">points</span>, what <span class="op">=</span> <span class="st">"lsm_p_area"</span><span class="op">)</span></span>
<span><span class="co">## Warning: Please use 'check_landscape()' to ensure the input data is valid.</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 3 × 7</span></span></span>
<span><span class="co">##   layer level class    id metric  value extract_id</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span>     1 patch     3    24 area   0.011<span style="text-decoration: underline;">3</span>          1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span>     1 patch     3    26 area   0.014<span style="text-decoration: underline;">8</span>          2</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span>     1 patch     3    23 area   0.015<span style="text-decoration: underline;">9</span>          3</span></span></code></pre></div>
<!-- If a line is provided, the results include the patch-level metric for all patches touched by the line. The use of the function is exactly the same as for points.  -->
<!-- For each patch, all core area metrics are returned. While the long line touches three patches (2, 12, 20), line two only touches two patches (20, 25). In this example, all core are metrics are selected for extraction. -->
</div>
<div class="section level2">
<h2 id="sample-landscape-metrics-at-sample-points">Sample landscape metrics at sample points<a class="anchor" aria-label="anchor" href="#sample-landscape-metrics-at-sample-points"></a>
</h2>
<p>To sample landscape metrics within a certain buffer <em>around</em>
sample points, there is <code><a href="../reference/sample_lsm.html">sample_lsm()</a></code>. Now, the size of the
buffers around the sample locations must be specified. The functions
clips the landscape within the buffer (in other words sample plots) and
calculates the selected metrics.</p>
<p>The resulting <code>tibble</code> includes two extra columns. Again,
the id of the sample point is included. Furthermore, the size of the
actual sampled landscape can be different to the provided size due to
two reasons. Firstly, because clipping raster cells using a circle or a
sample plot not directly at a cell center lead to inaccuracies.
Secondly, sample plots can exceed the landscape boundary. Therefore, we
report the actual clipped sample plot area relative in relation to the
theoretical, maximum sample plot area e.g. a sample plot only half
within the landscape will have a
<code>percentage_inside = 50</code>.</p>
<p><img src="guide_sample_lsm_files/figure-html/unnamed-chunk-5-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sample_lsm.html">sample_lsm</a></span><span class="op">(</span><span class="va">landscape</span>, y <span class="op">=</span> <span class="va">points</span>, size <span class="op">=</span> <span class="fl">10</span>, </span>
<span>           level <span class="op">=</span> <span class="st">"landscape"</span>, type <span class="op">=</span> <span class="st">"diversity metric"</span>, </span>
<span>           classes_max <span class="op">=</span> <span class="fl">3</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="co">## <span style="color: #949494;"># A tibble: 27 × 8</span></span></span>
<span><span class="co">##    layer level     class    id metric     value plot_id percentage_inside</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 landscape    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> msidi      0.947       1                75</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     1 landscape    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> msiei      0.862       1                75</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>     1 landscape    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> pr         3           1                75</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>     1 landscape    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> prd    <span style="text-decoration: underline;">10</span>000           1                75</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>     1 landscape    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> rpr      100           1                75</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>     1 landscape    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> shdi       1.02        1                75</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>     1 landscape    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> shei       0.928       1                75</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>     1 landscape    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> sidi       0.612       1                75</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>     1 landscape    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> siei       0.918       1                75</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>     1 landscape    <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> msidi      0.969       2                75</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 17 more rows</span></span></span></code></pre></div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<p>Pebesma, E., 2018. Simple Features for R: Standardized Support for
Spatial Vector Data. The R Journal, <a href="https://journal.r-project.org/archive/2018/RJ-2018-009/" class="external-link uri">https://journal.r-project.org/archive/2018/RJ-2018-009/</a></p>
<p>Roger S. Bivand, Edzer Pebesma, Virgilio Gomez-Rubio, 2013. Applied
spatial data analysis with R, Second edition. Springer, NY. <a href="http://www.asdar-book.org/" class="external-link uri">http://www.asdar-book.org/</a></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Maximilian H.K. Hesselbarth, Marco Sciaini, Jakub Nowosad, Sebastian Hanss.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
